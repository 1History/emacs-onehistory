#+TITLE: EWW History Extension
#+DATE: 2022-02-21T11:41:31+0800
#+AUTHOR: Jiacai Liu
#+LANGUAGE: cn
#+EMAIL: jiacai2050+org@gmail.com
#+OPTIONS: toc:nil num:nil
#+STARTUP: content

[[https://github.com/1History/eww-history-ext/actions/workflows/CI.yml][https://github.com/1History/eww-history-ext/actions/workflows/CI.yml/badge.svg]]

#+begin_quote
Persist eww histories into SQLite.
#+end_quote

Currently supported package:
- EWW
- Elfeed

* Usage
#+BEGIN_SRC emacs-lisp
(use-package eww-history-ext
  :load-path "~/eww-history-ext"
  :custom ((eww-history-ext-elfeed-integration t))
  :config
  (eww-history-ext-enable))
#+END_SRC
After enable eww-history-ext, visit histories of eww (and elfeed) will be saved into eww-history-ext, you can use =M-x eww-history-ext-list= to browse saved histories.
* Install
Clone this repo, build so library, and add it to load-path:
#+begin_src bash
make release
#+end_src
This command will output =eww-history-dyn.so= file in current directory, which we can add it to =load-path=

#+BEGIN_SRC emacs-lisp
(add-to-list 'load-path "/path/to/emacs-eww-history")
#+END_SRC
* Screenshots
[[file:screenshots/list.png]]
* Development
- [[https://ubolonton.github.io/emacs-module-rs/latest/reloading.html][Live Reloading - emacs-module-rs 0.18]]
#+BEGIN_SRC emacs-lisp
;;; 加载热启动模块
(module-load "/tmp/emacs-module-rs/target/debug/libemacs_rs_module.dylib")
(require 'rs-module)

;;; 重启加载 so 文件
(rs-module/load "/tmp/eww-history-ext/eww-history-ext-dyn.so")

;;; 查询最新历史数据
(setq eww-history-ext-db nil)
(eww-history-ext-query-latest)
#+END_SRC
